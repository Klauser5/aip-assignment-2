(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,a){},51:function(e,t,a){},64:function(e,t,a){e.exports=a(98)},69:function(e,t,a){},70:function(e,t,a){},87:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),l=a.n(o),c=(a(69),a(6)),u=a(20),s=a(22),i=a(21),m=(a(70),a(5)),d=a(28),h=a(7),f=a.n(h),g=(a(87),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={users:[]},e}return Object(d.a)(a,[{key:"GetSortOrder",value:function(e){return function(t,a){return t[e]>a[e]?-1:t[e]<a[e]?1:0}}},{key:"componentDidMount",value:function(){var e=this;f.a.get("lists/leaderboard").then((function(t){var a=t.data,n=[];if(a.length<10)a.sort(e.GetSortOrder("score"));else{a.sort(e.GetSortOrder("score"));for(var r=0;r<10;r++)n.push(a[r])}e.setState({users:n})}))}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("h5",null,"Leaderboard"),n.createElement("div",{className:"leaderboard"},n.createElement("ol",null,this.state.users.map((function(e){return n.createElement("li",null,e.name+": "+e.score+" points.")})))))}}]),a}(n.Component));a(51);var E=function(e){return r.a.createElement("div",{class:"center"},"Welcome to the Favour Centre!",r.a.createElement("p",null,"Username:"),r.a.createElement("p",null,localStorage.getItem("username")),r.a.createElement(g,null))},v=a(9),p=a(106),b=a(103),I=a(100),S=(a(34),Object(n.createContext)());function O(){return Object(n.useContext)(S)}var j=a(52);function w(){var e=Object(j.a)(["\n  background-color: red;\n"]);return w=function(){return e},e}var k=a(53).a.div(w());var y=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],l=a[1],u=Object(n.useState)(""),s=Object(c.a)(u,2),i=s[0],d=s[1],h=Object(n.useState)(!1),g=Object(c.a)(h,2),E=(g[0],g[1]),S=Object(n.useState)(!1),j=Object(c.a)(S,2),w=j[0],y=j[1],q=O().setAuthTokens;return"true"==localStorage.getItem("loggedIn")?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"loginform"},r.a.createElement(p.a,{style:{width:"18rem"}},r.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t={email:o,password:i};f.a.post("http://localhost:9000/login",{login:t}).then((function(e){localStorage.setItem("username",e.data.name),localStorage.setItem("user",e.data.user),localStorage.setItem("userID",e.data.id),localStorage.setItem("loggedIn",!0),localStorage.setItem("authToken",e.data.authToken),E(!0),200===e.status?(q(e.data),E(!0)):y(!0)})).catch((function(e){y(!0)}))},noValidate:!0},r.a.createElement(b.a.Group,{controlId:"id"},r.a.createElement(b.a.Label,null,"Email address"),r.a.createElement(b.a.Control,{type:"email",name:"email",placeholder:"Enter email",value:o,onChange:function(e){l(e.target.value)}})),r.a.createElement(b.a.Group,{controlId:"password"},r.a.createElement(b.a.Label,null,"Password"),r.a.createElement(b.a.Control,{name:"password",type:"password",placeholder:"Password",value:i,onChange:function(e){d(e.target.value)}})),r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"),r.a.createElement(v.b,{to:"/register"},"Don't have an account?")),w&&r.a.createElement(k,null,"The username or password provided were incorrect!")))};var q=function(e){return r.a.createElement("div",null,r.a.createElement(b.a,{onSubmit:function(e){e.preventDefault(),localStorage.setItem("user",null),localStorage.setItem("loggedIn",!1),localStorage.setItem("authToken",null)}},r.a.createElement(I.a,{variant:"primary",type:"submit"},"Logout")))};var C=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],l=a[1],u=Object(n.useState)(""),s=Object(c.a)(u,2),i=s[0],d=s[1],h=Object(n.useState)(""),g=Object(c.a)(h,2),E=g[0],S=g[1],j=Object(n.useState)(new Date(0)),w=Object(c.a)(j,2),y=w[0],q=w[1],C=Object(n.useState)(!1),T=Object(c.a)(C,2),L=(T[0],T[1]),D=Object(n.useState)(!1),x=Object(c.a)(D,2),N=x[0],G=x[1],R=O().setAuthTokens;return!0===localStorage.getItem("loggedIn")?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"registerform"},r.a.createElement(p.a,{style:{width:"18rem"}},r.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t={name:E,email:o,password:i,dateofbirth:y,role:"user",score:0,debits:[],credits:[],requests:[]};console.log(t),console.log({user:t}),f.a.post("http://localhost:9000/register",t).then((function(e){200===e.status?(R(e.data),L(!0)):G(!0)})).catch((function(e){G(!0)}))},noValidate:!0},r.a.createElement(b.a.Group,{controlId:"email"},r.a.createElement(b.a.Label,null,"Email Address"),r.a.createElement(b.a.Control,{type:"email",name:"email",placeholder:"Enter email",value:o,onChange:function(e){l(e.target.value),console.log(o)}})),r.a.createElement(b.a.Group,{controlId:"name"},r.a.createElement(b.a.Label,null,"Name"),r.a.createElement(b.a.Control,{type:"string",name:"name",placeholder:"Enter name",value:E,onChange:function(e){S(e.target.value)}})),r.a.createElement(b.a.Group,{controlId:"password"},r.a.createElement(b.a.Label,null,"Password"),r.a.createElement(b.a.Control,{name:"password",type:"password",placeholder:"Password",value:i,onChange:function(e){d(e.target.value)}})),r.a.createElement(b.a.Group,{controlId:"dateofbirth"},r.a.createElement(b.a.Label,null,"Date of Birth"),r.a.createElement(b.a.Control,{type:"date",name:"dateofbirth",value:y,onChange:function(e){q(e.target.value)},placeholder:"Date of Birth"})),r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"),r.a.createElement(v.b,{to:"/login"},"Already have an account?"),N&&r.a.createElement(k,null,"You have provided one or more invalid details. Please try again."))))},T=a(57),L=a(27),D=a(101),x=(a(94),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){console.log(n.state),e.preventDefault();var t={token:localStorage.getItem("authToken"),externalemail:n.state.externalemail,owed:n.state.owed,favourname:n.state.favourname,favourcontent:n.state.favourcontent,favourcompleted:n.state.favourcompleted};f.a.post("http://localhost:9000/newfavour",t).then((function(e){console.log(e),console.log(e.data),n.setState({result:e.data})})).catch((function(e){console.error(e)}))},n.handleInputChange=function(e){e.preventDefault(),console.log(e);var t=e.target,a=t.name,r=t.value,o=n.state.errors;switch(a){case"favourname":o.favourname=r.length<3||r.length>1024?"Your favour name must be 3 characters or longer.":"";break;case"favourcontent":o.favourcontent=r.length<3||r.length>1024?"Your favour description must be 3 characters or longer.":"";break;case"owebutton":n.setState({owed:!1});break;case"owedbutton":n.setState({owed:!0})}n.setState(Object(T.a)({},e.target.name,e.target.value))},n.state={token:"",externalemail:"",owed:!1,favourname:"",favourcontent:"",favourcompleted:!1,errors:{favourname:"",favourcontent:"",favourcompleted:""}},n.handleSubmit=n.handleSubmit.bind(Object(L.a)(n)),n}return Object(d.a)(a,[{key:"externalUserLabel",value:function(){return console.log("invoked!"),this.state.owed?"Email of user who owes you":"Email of user you owe"}},{key:"render",value:function(){return r.a.createElement("div",{className:"registerform"},r.a.createElement(p.a,{style:{width:"18rem"}},r.a.createElement(b.a,{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement(D.a,{"aria-label":"Favour Choice"},r.a.createElement(I.a,{name:"owebutton",variant:"primary",onClick:this.handleInputChange},"I owe"),r.a.createElement(I.a,{name:"owedbutton",variant:"primary",onClick:this.handleInputChange},"I am owed"),"            "),r.a.createElement(b.a.Group,{controlId:"token"},r.a.createElement(b.a.Control,{type:"hidden",name:"token",value:localStorage.getItem("authToken")})),r.a.createElement(b.a.Group,{controlId:"favourcompleted"},r.a.createElement(b.a.Control,{type:"hidden",name:"favourcompleted",value:!1})),r.a.createElement(b.a.Group,{controlId:"token"},r.a.createElement(b.a.Label,null,this.externalUserLabel()),r.a.createElement(b.a.Control,{type:"email",name:"externalemail",placeholder:"Enter email",value:this.state.externalemail,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"favourname"},r.a.createElement(b.a.Label,null,"Favour Name"),r.a.createElement(b.a.Control,{type:"string",name:"favourname",placeholder:"Enter favour name",value:this.state.favourname,onChange:this.handleInputChange}),r.a.createElement("p",null," ",this.state.errors.favourname," ")),r.a.createElement(b.a.Group,{controlId:"favourcontent"},r.a.createElement(b.a.Label,null,"Favour Description"),r.a.createElement(b.a.Control,{type:"string",name:"favourcontent",placeholder:"Enter a description of the favour",value:this.state.favourcontent,onChange:this.handleInputChange}),r.a.createElement("p",null," ",this.state.errors.favourcontent," ")),this.state.favourname.length>=3&&this.state.favourcontent.length>=3&&r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"))))}}]),a}(n.Component)),N=a(102);function G(e){var t=Object(m.g)().id,a=Object(n.useState)(!0),o=Object(c.a)(a,2),l=o[0],u=o[1],s=Object(n.useState)(),i=Object(c.a)(s,2),d=i[0],h=i[1];return Object(n.useEffect)((function(){f.a.get("/request/request?id="+t).then((function(e){h(e.data),u(!1)}))}),[]),l?r.a.createElement(N.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(p.a,null,r.a.createElement(p.a.Img,{variant:"top",src:"holder.js/100px180"}),r.a.createElement(p.a.Body,null,r.a.createElement(p.a.Title,null,d.requestname),r.a.createElement(p.a.Text,null,d.requestcontent),localStorage.getItem("userID")===d.ownerID?r.a.createElement(I.a,{linkTo:"/",variant:"danger"},"Delete"):""))}function R(){return r.a.createElement(v.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/request/:id",children:r.a.createElement(G,null)})))}var P=document.getElementById("root");l.a.render(r.a.createElement(R,null),P);a(95);var A=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1];return Object(n.useEffect)((function(){f.a.get("/request").then((function(e){l(e.data)}))})),r.a.createElement("div",null,r.a.createElement("h1",null," Requests "),r.a.createElement("ol",{class:"requestList"},o.map((function(e){return r.a.createElement("li",{class:"request"},r.a.createElement("h1",null," ",e.requestname," "),r.a.createElement("p",null,"Request Description: ",e.requestcontent),r.a.createElement("p",null,"Request ID (TESTING): ",e._id),r.a.createElement("p",null,"Request userID (TESTING): ",e.ownerID))}))))};a(96);var B=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2);return a[0],a[1],console.log(e),console.log(typeof e.request.name),r.a.createElement("div",{class:"request"},r.a.createElement("h1",null," ",e.request.name," "),r.a.createElement("p",null,"Request Description: ",e.request.content),r.a.createElement("p",null,"Request ID (TESTING): ",e.request._id),r.a.createElement("p",null,"Request userID (TESTING): ",e.request.ownerID),r.a.createElement(I.a,{value:e.request._id,variant:"danger",type:"submit",onClick:function(t){t.preventDefault(),console.log(t.target.value),f.a.post("/request/delete",{requestID:t.target.value,authToken:localStorage.getItem("authToken")}).then((function(t){e.setRequests(t.data)}))}},"DELETE"),r.a.createElement("p",null,"If fields are missing, field names might have changed. Please delete this request and make a new one"))};var F=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1];return Object(n.useEffect)((function(){f.a.post("/request/mine",{authToken:localStorage.getItem("authToken")}).then((function(e){l(e.data)}))})),Object(n.useEffect)((function(){f.a.post("/request/mine",{authToken:localStorage.getItem("authToken")}).then((function(e){l(e.data)}))}),o),r.a.createElement("div",{class:"center"},r.a.createElement("p",null,"Hello ",localStorage.getItem("username"),"!"),r.a.createElement("h1",null," Requests "),r.a.createElement("ul",{class:"requestList"},o.map((function(e){return r.a.createElement("li",{class:"request"},r.a.createElement(B,{request:e,setRequests:l}))}))))},J=a(63);var U=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return O().authTokens,localStorage.getItem("loggedIn"),"true"==localStorage.getItem("loggedIn")?r.a.createElement(m.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):(console.log("Redirecting to Login, not authed!"),r.a.createElement(m.b,Object.assign({},a,{render:function(e){return r.a.createElement(m.a,{to:"/login"})}})))},V=a(104),W=a(105),Y=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(u.a)(this,a),n=t.call(this,e),console.log("initial history is: ",JSON.stringify(n.history,null,2)),n.history.listen((function(e,t){console.log("The current URL is ".concat(e.pathname).concat(e.search).concat(e.hash)),console.log("The last navigation action was ".concat(t),JSON.stringify(n.history,null,2))})),n}return a}(v.a);var _=function(e){var t=JSON.parse(localStorage.getItem("tokens")),a=Object(n.useState)(t),o=Object(c.a)(a,2),l=o[0],u=o[1];return r.a.createElement(S.Provider,{value:{authTokens:l,setAuthTokens:function(e){localStorage.setItem("tokens",JSON.stringify(e)),u(e)}}},r.a.createElement(Y,null,r.a.createElement("div",{className:"App"},r.a.createElement(V.a,{bg:"light",expand:"lg"},r.a.createElement(V.a.Brand,{href:"#home"},"Favour Centre"),r.a.createElement(V.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(V.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(W.a,{className:"mr-auto"},r.a.createElement(W.a.Link,{href:"/"},"Home Page"),r.a.createElement(W.a.Link,{href:"/requests"},"Requests"),r.a.createElement(W.a.Link,{href:"/newrequest"},"New Request"),r.a.createElement(W.a.Link,{href:"/newfavour"},"New Favour"),r.a.createElement(W.a.Link,{href:"/profile"},"Profile"),r.a.createElement(W.a.Link,{href:"/register"},"Register"),r.a.createElement(W.a.Link,{href:"/login"},"Login"),r.a.createElement(W.a.Link,{href:"/logout"},"Logout")))),r.a.createElement(m.b,{exact:!0,path:"/",component:E}),r.a.createElement(m.b,{exact:!0,path:"/register",component:C}),r.a.createElement(m.b,{exact:!0,path:"/login",component:y}),r.a.createElement(m.b,{exact:!0,path:"/logout",component:q}),r.a.createElement(m.b,{exact:!0,path:"/requests",component:A}),r.a.createElement(U,{exact:!0,path:"/newfavour",component:x}),r.a.createElement(U,{exact:!0,path:"/profile",component:F}),r.a.createElement(U,{exact:!0,path:"/request/:id",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(97);l.a.render(r.a.createElement(v.a,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.c72922c8.chunk.js.map